

HTTPS
----------------------------------------
HTTS是在HTTP外层又包了一层SSL/TLS协议，SSL/TLS负责加解密；SSL/TLS再外层被TCP协议包裹；


通信流程
----------------------------------------

1、浏览器携带支持的加密算法和哈希算法说明向服务器的443端口发起请求。

2、服务器收到请求，选择浏览器支持的加密算法和哈希算法。

3、服务器把数字证书返回给浏览器，数字证书可以是向某个可靠机构申请的，也可以是自制的。

4、浏览器这边原来就存储有一个证书列表索引，它会索引服务器下发的证书，如果找不到，则浏览器会提示该网站是不可信的，如果找到则将根据索引找到的证书公钥对服务器下发的数字证书进行解密得到证书的内容和证书签名，内容包括网站的网址、网站的公钥、证书的有效期等。解出数字证书后，浏览器会验证数字证书签名是否正确，检查证书中的网址与当前网址是不是一致，检查证书是否已经过期；检查依次通过后，浏览器生成一个随机数R，并使用网站公钥对R进行加密。并把加密的R发给服务器。

5.服务器用私钥解密得到R。

6、服务器后面以R为密钥使用对称加密算对浏览器与服务器之间的所有交互内容进行加密。浏览器亦如此。

